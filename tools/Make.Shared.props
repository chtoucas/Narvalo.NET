<?xml version="1.0" encoding="utf-8" ?>
<Project ToolsVersion="12.0" 
         InitialTargets="__InitializeMakeSharedProps"
         xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <!--
    This file defines common MSBuild properties shared among Make.Common.* and Make.Custom.*.
  -->
  
  <PropertyGroup>
    <!-- If true, dynamically generate the assemblies' version. Default to true. -->
    <BuildGeneratedVersion Condition=" '$(BuildGeneratedVersion)' != 'false' ">true</BuildGeneratedVersion>

    <!-- If true, sign the assemblies. Default to false. -->
    <SignAssembly Condition=" '$(SignAssembly)' != 'true' ">false</SignAssembly>

    <!-- If true, internals are visible. Default to true. -->
    <VisibleInternals Condition=" '$(VisibleInternals)' != 'false' ">true</VisibleInternals>
  </PropertyGroup>

  <!-- Define layout-related properties. -->
  <PropertyGroup>
    <WorkRoot>$(RepositoryRoot)work\</WorkRoot>

    <WorkLogDir>$(WorkRoot)log\</WorkLogDir>
    <WorkPackagesDir>$(WorkRoot)packages\</WorkPackagesDir>
  </PropertyGroup>

  <!-- Define the NuGetCommand property. -->
  <PropertyGroup>
    <NuGetCommand>$(MSBuildThisFileDirectory)nuget.exe</NuGetCommand>
  </PropertyGroup>


  <!-- Initial target. -->
  <Target Name="__InitializeMakeSharedProps">
    <MakeDir Directories="$(WorkRoot)" Condition=" !Exists($(WorkRoot)) " />
    <MakeDir Directories="$(WorkLogDir)" Condition=" !Exists($(WorkLogDir)) " />
    <MakeDir Directories="$(WorkPackagesDir)" Condition=" !Exists($(WorkPackagesDir)) " />
  </Target>
</Project>
