<?xml version="1.0" encoding="utf-8" ?>
<Project ToolsVersion="12.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <!--
    This file defines common MSBuild properties shared among all projects.
    
    Options:
    - BuildInParallel
    - Configuration
    - Platform
  -->

  <!-- Define common MSBuild project properties. -->
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>

    <BuildInParallel Condition=" '$(BuildInParallel)' == '' And $(MSBuildNodeCount) &gt; 1 ">true</BuildInParallel>
    <BuildInParallel Condition=" '$(BuildInParallel)' == '' ">false</BuildInParallel>

    <!-- Only Visual Studio is expected to override this. -->
    <VisualStudioVersion Condition=" '$(VisualStudioVersion)' == '' ">12.0</VisualStudioVersion>
  </PropertyGroup>

  <!-- Define common Narvalo project properties. -->
  <PropertyGroup>
    <!-- The reuse of RepositoryRoot allows to speed up things a little bit
         when building from one of the master projects.
         
         For instance, Make.proj imports Make.Common.props then Shared.props;
         RepositoryRoot is not already set, we initialize it. 
         When Make.proj builds a child project, it injects RepositoryRoot
         (see BuildProperties in Make.Common.props). This time when the child 
         project imports Shared.props, RepositoryRoot is already set. -->
    <RepositoryRoot Condition=" '$(RepositoryRoot)' == '' ">$([MSBuild]::GetDirectoryNameOfFileAbove($(MSBuildThisFileDirectory), Make.proj))\</RepositoryRoot>

    <RepositorySettingsDir>$(RepositoryRoot)etc\</RepositorySettingsDir>
    <RepositoryPackagesDir>$(RepositoryRoot)packages\</RepositoryPackagesDir>
  </PropertyGroup>
</Project>