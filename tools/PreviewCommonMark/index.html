<!DOCTYPE html>
<html>
<head>
 <title>CommonMark</title>
 <style type="text/css">
  body {
   font-size: 12px;
   font-family: sans-serif;
   width: 70em;
   margin: 1em auto;
  }

  h1 {
   text-align: center;
  }

  h3 {
   font-style: italic;
  }

  #source {
   width: 96.5%;
   height: 5em;
   padding: 1em;
   font-family: monospace;
  }

  #preview {
   height: 600px;
   padding: .5em 1em;
   border: 1px solid #ddd;
   overflow: scroll;
   resize: vertical;
  }
 </style>
</head>
<body>
 <textarea id="source"></textarea>
 <p id="preview"></p>

 <script src="./jquery-2.1.1.min.js"></script>
 <script src="./commonmark.js"></script>
 <script>
  $(function () {
   var $source = $("#source");
   var $preview = $("#preview");

   var parser = new commonmark.DocParser();
   var renderer = new commonmark.HtmlRenderer();

   var parseAndRender = function () {
    var ast = parser.parse($source.val());

    if (undefined === ast) { return; }

    $preview.html(renderer.renderBlock(ast));
   };

   // Make tab insert a tab in the text box
   $source.keydown(function (e) {
    if (e.which == 9) {
     e.preventDefault();
     this.value += "\t";
    }
   });

   parseAndRender();

   $source.bind("keyup paste cut mouseup", parseAndRender);
  });
 </script>
</body>
</html>